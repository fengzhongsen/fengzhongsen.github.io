<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React | 老冯博客</title>
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="icon" href="/favicons.png">
    <meta name="description" content="Enjoy when you can, and endure when you must.">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.e1818238.css" as="style"><link rel="preload" href="/assets/js/app.7eae9dcf.js" as="script"><link rel="preload" href="/assets/js/3.47128248.js" as="script"><link rel="preload" href="/assets/js/1.19c0dc54.js" as="script"><link rel="preload" href="/assets/js/32.901a52e4.js" as="script"><link rel="prefetch" href="/assets/js/10.cea6f141.js"><link rel="prefetch" href="/assets/js/11.5a11e10c.js"><link rel="prefetch" href="/assets/js/12.26c2166b.js"><link rel="prefetch" href="/assets/js/13.aa8b3a38.js"><link rel="prefetch" href="/assets/js/14.5effcdff.js"><link rel="prefetch" href="/assets/js/15.8c81e06d.js"><link rel="prefetch" href="/assets/js/16.ec4ab0a2.js"><link rel="prefetch" href="/assets/js/17.01f19520.js"><link rel="prefetch" href="/assets/js/18.2664aea4.js"><link rel="prefetch" href="/assets/js/19.c23a4c67.js"><link rel="prefetch" href="/assets/js/20.d3e687bf.js"><link rel="prefetch" href="/assets/js/21.72266b81.js"><link rel="prefetch" href="/assets/js/22.ac6bfc49.js"><link rel="prefetch" href="/assets/js/23.77839b75.js"><link rel="prefetch" href="/assets/js/24.6e09fada.js"><link rel="prefetch" href="/assets/js/25.d02ad957.js"><link rel="prefetch" href="/assets/js/26.07f57da6.js"><link rel="prefetch" href="/assets/js/27.359ca9f2.js"><link rel="prefetch" href="/assets/js/28.658591e5.js"><link rel="prefetch" href="/assets/js/29.1723a3c5.js"><link rel="prefetch" href="/assets/js/30.6eb03f90.js"><link rel="prefetch" href="/assets/js/31.d646b3d1.js"><link rel="prefetch" href="/assets/js/33.a185b373.js"><link rel="prefetch" href="/assets/js/34.5e1811de.js"><link rel="prefetch" href="/assets/js/35.865c3172.js"><link rel="prefetch" href="/assets/js/36.95710167.js"><link rel="prefetch" href="/assets/js/37.e5d5903a.js"><link rel="prefetch" href="/assets/js/38.1824a8bd.js"><link rel="prefetch" href="/assets/js/39.dc7d1357.js"><link rel="prefetch" href="/assets/js/4.7360de63.js"><link rel="prefetch" href="/assets/js/40.edd60a78.js"><link rel="prefetch" href="/assets/js/41.26733926.js"><link rel="prefetch" href="/assets/js/42.1ab27275.js"><link rel="prefetch" href="/assets/js/43.df10d541.js"><link rel="prefetch" href="/assets/js/44.742a8f7a.js"><link rel="prefetch" href="/assets/js/45.69da9971.js"><link rel="prefetch" href="/assets/js/46.ba23cf9b.js"><link rel="prefetch" href="/assets/js/47.4b6b011e.js"><link rel="prefetch" href="/assets/js/5.1b864ff1.js"><link rel="prefetch" href="/assets/js/6.907da7e5.js"><link rel="prefetch" href="/assets/js/7.87ce6ecf.js"><link rel="prefetch" href="/assets/js/8.40d9f71a.js"><link rel="prefetch" href="/assets/js/9.de1fbc2f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e1818238.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>老冯博客</h3> <p class="description" data-v-59e6cb88>Enjoy when you can, and endure when you must.</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>Sunny</span>
          
        <span data-v-59e6cb88>2016 - </span>
        2023
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/favicons.png" alt="老冯博客" class="logo"> <span class="site-name">老冯博客</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Operation/" class="nav-link"><i class="undefined"></i>
  Operation
</a></li><li class="dropdown-item"><!----> <a href="/categories/FrontEnd/" class="nav-link"><i class="undefined"></i>
  FrontEnd
</a></li><li class="dropdown-item"><!----> <a href="/categories/BackEnd/" class="nav-link"><i class="undefined"></i>
  BackEnd
</a></li><li class="dropdown-item"><!----> <a href="/categories/Interview/" class="nav-link"><i class="undefined"></i>
  Interview
</a></li><li class="dropdown-item"><!----> <a href="/categories/Literature/" class="nav-link"><i class="undefined"></i>
  Literature
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  历史
</a></div><div class="nav-item"><a href="/resume/" class="nav-link"><i class="iconfont reco-account"></i>
  关于
</a></div><div class="nav-item"><a href="https://github.com/fengzhongsen/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/favicons.png" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    Sunny
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>31</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>16</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Operation/" class="nav-link"><i class="undefined"></i>
  Operation
</a></li><li class="dropdown-item"><!----> <a href="/categories/FrontEnd/" class="nav-link"><i class="undefined"></i>
  FrontEnd
</a></li><li class="dropdown-item"><!----> <a href="/categories/BackEnd/" class="nav-link"><i class="undefined"></i>
  BackEnd
</a></li><li class="dropdown-item"><!----> <a href="/categories/Interview/" class="nav-link"><i class="undefined"></i>
  Interview
</a></li><li class="dropdown-item"><!----> <a href="/categories/Literature/" class="nav-link"><i class="undefined"></i>
  Literature
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  历史
</a></div><div class="nav-item"><a href="/resume/" class="nav-link"><i class="iconfont reco-account"></i>
  关于
</a></div><div class="nav-item"><a href="https://github.com/fengzhongsen/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>React</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>Sunny</span>
          
        <span data-v-59e6cb88>2016 - </span>
        2023
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">React</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>Sunny</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>3/26/2021</span></i> <i class="iconfont reco-eye" data-v-8a445198><span id="/frontend/javascript/react.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-8a445198><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>React</span></i></div></div> <div class="theme-reco-content content__default"><p>React 是一个优秀前端框架的典型，它在架构上融合了数据驱动视图、组件化、函数式编程、面向对象、Fiber 等经典设计“哲学”，在底层技术选型上涉及了 JSX、虚拟 DOM 等经典解决方案，在周边生态上至少涵盖了状态管理和前端路由两大领域的最佳实践。此外，它还自建了状态管理机制与事件系统，创造性地在前端框架中引入了 Hooks 思想等。</p> <h1 id="一、聊聊-jsx"><a href="#一、聊聊-jsx" class="header-anchor">#</a> 一、聊聊 JSX</h1> <ol><li>定义：JSX 是 JavaScript 的一种语法扩展，它和模板语言很接近，但是它充分具备 JavaScript 的能力</li> <li>作用：降低学习成本，提高开发体验和效率</li> <li>工作流程：JSX 会被 Babel 编译为 <code>React.createElement()</code>，<code>React.createElement()</code>将返回一个 ReactElement 的 JS 对象。即虚拟 DOM 的一个节点</li> <li><code>createElement</code> API 和 <code>ReactElement()</code> 构造函数的关系：<code>createElement(type, config, ...children)</code>，接收三个参数，type 可能是原生 HTML 标签字符串，也可能是 React Component 类型 或 React Fragment 类型，其中首先从 <code>config</code> 中提取出 <code>ref</code>、<code>key</code>、<code>source</code>、<code>__self</code>、<code>props</code> 等信息，其次是通过遍历 <code>type.defaultProps</code> 属性，对 <code>props</code> 设置默认值，最后将 <code>ref</code>、<code>key</code>、<code>source</code>、<code>__self</code>、<code>props</code> 等传递给 <code>ReactElement()</code> 构造函数生成 ReactElement 对象</li> <li>补充：虚拟 DOM 与真实 DOM 的链接者就是 <code>ReactDOM.render()</code></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  element<span class="token punctuation">,</span> <span class="token comment">// 需要渲染的元素（ReactElement）</span>
  container<span class="token punctuation">,</span> <span class="token comment">// 元素挂载的目标容器（一个真实DOM）</span>
  <span class="token punctuation">[</span>callback<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 回调函数，可选参数，可以用来处理渲染结束后的逻辑</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h1 id="二、设计理念"><a href="#二、设计理念" class="header-anchor">#</a> 二、设计理念</h1> <h2 id="_2-1-虚拟-dom"><a href="#_2-1-虚拟-dom" class="header-anchor">#</a> 2.1 虚拟 DOM</h2> <ol><li>组件初始化：通过生命周期中的 render 方法生成虚拟 DOM，再通过 ReactDOM.render 实现虚拟 DOM 到真实 DOM 的转换</li> <li>组件更新时：通过生命周期中的 render 方法生成<strong>新的虚拟 DOM</strong>，再通过 diff 算法定位出两次虚拟 DOM 的差异，针对变化的真实 DOM 作定向更新</li></ol> <h2 id="_2-2-组件化"><a href="#_2-2-组件化" class="header-anchor">#</a> 2.2 组件化</h2> <ol><li>封闭：每个组件内部只处理它内部的渲染逻辑，没有数据交互的情况下各自为政</li> <li>开放：基于“单向数据流”原则完成组件间通信，对渲染结果构成影响</li></ol> <h2 id="_2-3-生命周期"><a href="#_2-3-生命周期" class="header-anchor">#</a> 2.3 生命周期</h2> <ol><li>灵魂：render 函数是 React 的“灵魂”，组件的初始化和更新都离不开 render</li> <li>躯干：生命周期函数是 React 的”躯干”，与 render 一起构成了 React 的“生命时间轴”</li></ol> <h1 id="三、生命周期"><a href="#三、生命周期" class="header-anchor">#</a> 三、生命周期</h1> <h2 id="_3-1-react-15-生命周期函数"><a href="#_3-1-react-15-生命周期函数" class="header-anchor">#</a> 3.1 React 15 生命周期函数</h2> <ol><li>组件挂载（初始化渲染）：<code>constructor()</code>&gt;<code>componentWillMount</code>&gt;<code>render()</code>&gt;<code>componentDidMount()</code></li> <li>组件更新（由父组件触发）：<code>componentWillReceiveProps()</code>&gt;<code>shouldComponentUpdate()</code>&gt;<code>componentWillUpdate()</code>&gt;<br> <code>render()</code>&gt;<code>componentDidUpdate()</code></li> <li>组件更新（由自身触发）：<code>shouldComponentUpdate()</code>&gt;<code>componentWillUpdate()</code>&gt;<code>render()</code>&gt;<code>componentDidUpdate()</code></li> <li>组件卸载：<code>componentWillUnmount()</code></li></ol> <blockquote><p>注意：</p> <ol><li><code>componentWillReceiveProps(nextProps)</code>，无论<code>props</code>有无变化，只要父组件更新，就会触发</li> <li><code>shouldComponentUpdate(nextProps, nextState)</code>，默认返回<code>true</code>，通过逻辑判断返回<code>false</code>阻止重新渲染，达到优化的目的，也可以使用<code>PureComponent</code>代替<code>Component</code>来实现“有条件的 re-render”</li> <li><code>componentWillUnmount()</code>，在父组件中被移除会触发，此外如果组件设置了 key，在父组件 render 过程中发现 key 值和上次不一致也会被卸载</li></ol></blockquote> <h2 id="_3-2-react-16-生命周期函数"><a href="#_3-2-react-16-生命周期函数" class="header-anchor">#</a> 3.2 React 16 生命周期函数</h2> <ol><li>组件挂载（初始化渲染）：<code>constructor()</code>&gt;<code>static getDerivedStateFromProps()</code>&gt;<code>render()</code>&gt;<code>componentDidMount()</code></li> <li>组件更新：<code>static getDerivedStateFromProps()</code>&gt;<code>shouldComponentUpdate()</code>&gt;<code>render()</code>&gt;<br> <code>getSnapshotBeforeUpdate()</code>&gt;<code>componentDidUpdate()</code></li> <li>组件卸载：<code>componentWillUnmount()</code></li></ol> <div class="custom-block tip"><p class="title"></p><h3 id="static-getderivedstatefromprops-props-state"><a href="#static-getderivedstatefromprops-props-state" class="header-anchor">#</a> <code>static getDerivedStateFromProps(props, state)</code></h3> <ol><li>接收两个参数分别代表来自父组件的<code>props</code>和自身的<code>state</code>，使用<code>props</code>来派生/更新<code>state</code></li> <li>返回值之所以不可或缺，因为 React 需要用这个返回值来派生/更新组件的<code>state</code>。返回值对<code>state</code>的更新动作并非“覆盖”式的，而是针对某个属性的定向更新</li> <li>静态方法，内部不能访问 <code>this</code></li> <li>意义：确保生命周期函数的行为更加可控可预测，从根源上帮开发者避免不合理的编程方式，避免生命周期的滥用（类似于<code>this.fetch()</code>、<code>this.setState</code>等可能会产生副作用的操作）；同时，也是在为新的 Fiber 架构铺路</li></ol></div><div class="custom-block tip"><p class="title"></p><h3 id="getsnapshotbeforeupdate-prevprops-prevstate"><a href="#getsnapshotbeforeupdate-prevprops-prevstate" class="header-anchor">#</a> <code>getSnapshotBeforeUpdate(prevProps, prevState)</code></h3> <ol><li>执行时机是在<code>render()</code>方法之后，真实 DOM 更新之前，可以同时获取到更新前的真实DOM和更新后的<code>state``props</code>信息</li> <li>返回值会作为第三个参数给到<code>componentDidUpdate(prevProps, prevState, valueFromSnapshot)</code></li> <li>要想发挥作用，必须配合<code>componentDidUpdate()</code>使用</li></ol></div><blockquote><p>注意：</p> <ol><li>React 16 之前<code>render()</code>只允许返回单个元素，而 React 16 可以返回数组和字符串</li> <li>废弃了<code>componentWillMount()</code>、<code>componentWillReceiveProps()</code>、<code>componentWillUpdate()</code></li> <li>新增了<code>static getDerivedStateFromProps()</code>、<code>getSnapshotBeforeUpdate()</code></li> <li>更新流程中，在 v16.3 版本时，只有父组件的更新才会触发<code>static getDerivedStateFromProps()</code>，在 v16.4 中，任何因素触发的组件更新流程（包括由<code>this.setState</code>和<code>forceUpdate</code>触发的更新流程）都会触发</li></ol></blockquote> <h2 id="_3-3-fiber-架构"><a href="#_3-3-fiber-架构" class="header-anchor">#</a> 3.3 Fiber 架构</h2> <ol><li>React 16 改造生命周期的主要动机是为了配合 Fiber 架构带来的异步渲染机制</li> <li>Fiber 会使原本同步的渲染过程变成异步的</li> <li>Fiber 会将一个大的更新任务拆解为许多个小任务。每当执行完一个小任务时，渲染线程都会把主线程交回去，看看有没有优先级更高的工作要处理</li> <li>在 Fiber 机制下，render 阶段是允许暂停、终止和重启的，而且重启是重头执行的。<code>componentWillMount()</code>、<code>componentWillReceiveProps()</code>、<code>componentWillUpdate()</code>都处在render阶段，风险很大</li></ol> <h1 id="四、组件通信"><a href="#四、组件通信" class="header-anchor">#</a> 四、组件通信</h1> <ol><li>组件：从概念上类似于JavaScript函数，它接受任意的入参（即<code>props</code>），并返回用于描述页面展示内容的React元素</li> <li>单向数据流：当组件的<code>state</code>以<code>props</code>的形式流动时，只能流向组件树中比自己层级更低的组件。只能从父到子，不能反过来</li> <li>父-子组件通信：<code>props</code></li> <li>子-父组件通信：通过在<code>props</code>上传入函数，例如<code>onClick</code></li> <li>兄弟组件通信：通过父组件作为中介者</li> <li>结偶的通信方式：发布-订阅模式，EventEmitter</li> <li>Context API</li> <li>Redux</li></ol> <h1 id="五、hooks"><a href="#五、hooks" class="header-anchor">#</a> 五、Hooks</h1> <h2 id="_5-1-类组件和函数组件"><a href="#_5-1-类组件和函数组件" class="header-anchor">#</a> 5.1 类组件和函数组件</h2> <h3 id="类组件"><a href="#类组件" class="header-anchor">#</a> 类组件</h3> <ol><li>面向对象编程</li> <li>重</li></ol> <h3 id="函数组件"><a href="#函数组件" class="header-anchor">#</a> 函数组件</h3> <ol><li>函数式编程</li> <li>轻</li></ol> <h3 id="差异"><a href="#差异" class="header-anchor">#</a> 差异</h3> <ol><li>类组件需要继承 class，函数组件不能</li> <li>类组件可以访问生命周期方法，函数组件不能</li> <li>类组件可以获取到实例化后的 this，并基于这个this做各种事情，二函数组件不能</li> <li>类组件中可以定义并维护state（状态），而函数组件不可以</li> <li>......</li></ol> <h2 id="react-hooks"><a href="#react-hooks" class="header-anchor">#</a> React-Hooks</h2> <ol><li>函数组件会捕获 render 内部的状态，这是两类组件最大的不同。所以函数组件更符合React的设计理念</li> <li>React-Hooks 强化了函数组件的能力，帮助函数组件补全了生命周期、<code>state</code>管理等能力</li> <li>可以灵活定制</li></ol> <h3 id="为什么选择-react-hooks"><a href="#为什么选择-react-hooks" class="header-anchor">#</a> 为什么选择 React-Hooks</h3> <ol><li>告别难以理解的 Class。比如 this 和 生命周期函数</li> <li>解决业务逻辑难以拆分的问题。比如在class组件里，订阅和卸载订阅这一组逻辑会分布在didMound 和 willUnmount 两个生命周期中。useEffect 则可以分组放在一起</li> <li>使状态逻辑复用变得简单可行</li> <li>函数组件设计思想上来看，更加契合React的理念</li></ol> <h3 id="局限性"><a href="#局限性" class="header-anchor">#</a> 局限性</h3> <ol><li>尚未补齐类组件的全部能力，比如 getSnapshotBeforeUpdate、componentDidCatch</li> <li>在业务复杂的情况啊集，耦合内聚的边界很难把握</li> <li>有着严格的规则约束</li></ol> <h3 id="使用原则"><a href="#使用原则" class="header-anchor">#</a> 使用原则</h3> <ol><li>只在 React 函数中调用 Hook</li> <li>不在循环、条件或嵌套函数中调用 Hook</li></ol> <h3 id="原理"><a href="#原理" class="header-anchor">#</a> 原理</h3> <ol><li>首次渲染：<code>useState</code>&gt;<code>mountState</code>&gt;返回目标数组(如[state, setState]);</li> <li>更新阶段：<code>useState</code>&gt;<code>updateState</code>&gt;返回目标数组(如[state, setState]);</li></ol> <p>底层实现依赖于顺序链表。mountState（首次渲染）构建链表并渲染；updateState 依次遍历链表并渲染。</p> <h1 id="六、虚拟-dom"><a href="#六、虚拟-dom" class="header-anchor">#</a> 六、虚拟 DOM</h1> <ol><li>定义：虚拟 DOM 本质是 JS 和 DOM 之间的一个映射缓存，它在形态上表现为一个能够描述 DOM 结构及其属性信息的 JS 对象。</li> <li>工作：组件初始化：通过生命周期中的 render 方法生成虚拟 DOM，再通过 ReactDOM.render 实现虚拟 DOM 到真实 DOM 的转换。组件更新时：通过生命周期中的 render 方法生成<strong>新的虚拟 DOM</strong>，再通过 diff 算法定位出两次虚拟 DOM 的差异，针对变化的真实 DOM 作定向更新。</li> <li>优劣：优势在于减少了DOM操作，劣势在于JS大量的计算非常耗时。因为DOM操作和JS计算的能耗不在一个量级，所以说在一般的场景下，虚拟DOM是具有性能优势的。</li> <li>价值：提高了开发体验和效率，虚拟DOM的概念被应用到各个前端的框架。</li></ol> <h1 id="七、diff"><a href="#七、diff" class="header-anchor">#</a> 七、Diff</h1> <h2 id="react-15-的栈调和算法"><a href="#react-15-的栈调和算法" class="header-anchor">#</a> React 15 的栈调和算法</h2> <ol><li>分层对比；</li> <li>类型一致才有继续Diff的必要；</li> <li>key属性的设置，尽可能重用节点。</li></ol> <h1 id="八、setstate-同步还是异步"><a href="#八、setstate-同步还是异步" class="header-anchor">#</a> 八、setState 同步还是异步</h1> <p>setState 并不是单纯同步/异步的，它的表现会因调用场景的不同而不同：在 React 钩子函数及合成事件中，它表现为异步；而在 setTimeout、setInterval 等函数中，包括DOM原生事件中，它都表现为同步。这种差异，本质上是由React事务机制和批量更新机制的工作方式决定的。</p> <h1 id="九、fiber"><a href="#九、fiber" class="header-anchor">#</a> 九、Fiber</h1> <p>特点：可中断、可恢复、优先级</p> <h1 id="十、redux"><a href="#十、redux" class="header-anchor">#</a> 十、Redux</h1> <h2 id="_10-1-认识-flux"><a href="#_10-1-认识-flux" class="header-anchor">#</a> 10.1 认识 Flux</h2> <p>Flux 不是一个具体的框架，是由 Facebook 技术团队提出的应用架构，这套架构约束的是**“应用处理数据的模式”**。</p> <h1 id="十一、reactrouter"><a href="#十一、reactrouter" class="header-anchor">#</a> 十一、ReactRouter</h1> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'hashchange'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'popstate'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h1 id="十二、性能优化"><a href="#十二、性能优化" class="header-anchor">#</a> 十二、性能优化</h1> <ol><li>使用 shouldComponentUpdate 规避冗余的更新逻辑</li> <li>PureComponent + Immutable.js</li> <li>React.memo 与 useMemo</li></ol> <h2 id="_12-1-shouldcomponentupdate"><a href="#_12-1-shouldcomponentupdate" class="header-anchor">#</a> 12.1 shouldComponentUpdate</h2> <ol><li>返回 false 阻止更新</li> <li>可以比较 props，也可以比较 state</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span> nextState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 判断 text 属性在父组件更新前后有没有发生变化，若没有发生变化，则返回 false</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>nextProps<span class="token punctuation">.</span>text <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>text<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 只有在 text 属性值确实发生变化时，才允许更新进行下去</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>text<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="_12-2-purecomponent-immutable-js"><a href="#_12-2-purecomponent-immutable-js" class="header-anchor">#</a> 12.2 PureComponent + Immutable.js</h2> <ol><li>无须手写<code>shouldComponentUpdate</code>，对组件更新前后的<code>props</code>和<code>state</code>进行浅比较。</li> <li>Immutable，我们对当前数据的任何修改动作，都会导致一个新的对象的返回。</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>text<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Map <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'immutable'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> baseMap <span class="token operator">=</span> <span class="token function">Map</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'修言'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">career</span><span class="token operator">:</span> <span class="token string">'前端'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">99</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> changedMap <span class="token operator">=</span> baseMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">100</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'baseMap === changedMap'</span><span class="token punctuation">,</span> baseMap <span class="token operator">===</span> changedMap<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_12-3-react-memo"><a href="#_12-3-react-memo" class="header-anchor">#</a> 12.3 React.memo</h2> <ol><li>将在<code>shouldComponentUpdate</code>里边做的事情，放到<code>areEqual</code>里边。</li> <li>当<code>areEqual</code>不传的时候会对<code>props</code>执行浅比较。但不会感知<code>state</code>的变化。</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 将 Child 改写为 function 组件</span>
<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>props<span class="token punctuation">.</span>text<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// areEqual 用于对比 props 的变化</span>
<span class="token keyword">function</span> <span class="token function">areEqual</span><span class="token punctuation">(</span><span class="token parameter">prevProps<span class="token punctuation">,</span> nextProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>prevProps<span class="token punctuation">.</span>text <span class="token operator">===</span> nextProps<span class="token punctuation">.</span>text<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 使用 React.memo 来包装 ChildB</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span>Child<span class="token punctuation">,</span> areEqual<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="_12-4-usememo"><a href="#_12-4-usememo" class="header-anchor">#</a> 12.4 useMemo</h2> <ol><li>精细的控制部分逻辑的重渲染。</li> <li>如下<code>props.text</code>的改变不会触发<code>renderCount</code>。</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">ChildB</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> text<span class="token punctuation">,</span> count <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">renderText</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>text<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> <span class="token function-variable function">renderCount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> textContent <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">renderText</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>text<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> countContent <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">renderCount</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;childB&quot;</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>textContent<span class="token punctuation">}</span>
      <span class="token punctuation">{</span>countContent<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h1 id="十三、设计模式"><a href="#十三、设计模式" class="header-anchor">#</a> 十三、设计模式</h1> <h2 id="_13-1-高阶组件-hoc"><a href="#_13-1-高阶组件-hoc" class="header-anchor">#</a> 13.1 高阶组件(HOC)</h2> <p>高阶组件（HOC）是 React 中用于复用组件逻辑的一种高级技巧。HOC 自身不是 React API 的一部分，它是一种基于 React 的组合特性而形成的设计模式。——React 官方</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">checkUserAccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">withCheckAccess</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">WrappedComponent</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Do some common logic</span>
  <span class="token keyword">const</span> isAccessible <span class="token operator">=</span> <span class="token function">checkUserAccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">targetComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;childC&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>WrappedComponent <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> isAccessible<span class="token operator">=</span><span class="token punctuation">{</span>isAccessible<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
  <span class="token keyword">return</span> targetComponent<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> ChildC <span class="token operator">=</span> <span class="token function">withCheckAccess</span><span class="token punctuation">(</span>ChildB<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="_13-2-render-props"><a href="#_13-2-render-props" class="header-anchor">#</a> 13.2 Render Props</h2> <p>术语“render prop”是指一种在 React 组件之间使用一个值为函数的 prop 共享代码的简单技术。——React 官方</p></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/frontend/javascript/react.html#_2-1-虚拟-dom" class="sidebar-link reco-side-_2-1-虚拟-dom" data-v-b57cc07c>2.1 虚拟 DOM</a></li><li class="level-2" data-v-b57cc07c><a href="/frontend/javascript/react.html#_2-2-组件化" class="sidebar-link reco-side-_2-2-组件化" data-v-b57cc07c>2.2 组件化</a></li><li class="level-2" data-v-b57cc07c><a href="/frontend/javascript/react.html#_2-3-生命周期" class="sidebar-link reco-side-_2-3-生命周期" data-v-b57cc07c>2.3 生命周期</a></li><li class="level-2" data-v-b57cc07c><a href="/frontend/javascript/react.html#_3-1-react-15-生命周期函数" class="sidebar-link reco-side-_3-1-react-15-生命周期函数" data-v-b57cc07c>3.1 React 15 生命周期函数</a></li><li class="level-2" data-v-b57cc07c><a href="/frontend/javascript/react.html#_3-2-react-16-生命周期函数" class="sidebar-link reco-side-_3-2-react-16-生命周期函数" data-v-b57cc07c>3.2 React 16 生命周期函数</a></li><li class="level-3" data-v-b57cc07c><a href="/frontend/javascript/react.html#static-getderivedstatefromprops-props-state" class="sidebar-link reco-side-static-getderivedstatefromprops-props-state" data-v-b57cc07c>static getDerivedStateFromProps(props, state)</a></li><li class="level-3" data-v-b57cc07c><a href="/frontend/javascript/react.html#getsnapshotbeforeupdate-prevprops-prevstate" class="sidebar-link reco-side-getsnapshotbeforeupdate-prevprops-prevstate" data-v-b57cc07c>getSnapshotBeforeUpdate(prevProps, prevState)</a></li><li class="level-2" data-v-b57cc07c><a href="/frontend/javascript/react.html#_3-3-fiber-架构" class="sidebar-link reco-side-_3-3-fiber-架构" data-v-b57cc07c>3.3 Fiber 架构</a></li><li class="level-2" data-v-b57cc07c><a href="/frontend/javascript/react.html#_5-1-类组件和函数组件" class="sidebar-link reco-side-_5-1-类组件和函数组件" data-v-b57cc07c>5.1 类组件和函数组件</a></li><li class="level-3" data-v-b57cc07c><a href="/frontend/javascript/react.html#类组件" class="sidebar-link reco-side-类组件" data-v-b57cc07c>类组件</a></li><li class="level-3" data-v-b57cc07c><a href="/frontend/javascript/react.html#函数组件" class="sidebar-link reco-side-函数组件" data-v-b57cc07c>函数组件</a></li><li class="level-3" data-v-b57cc07c><a href="/frontend/javascript/react.html#差异" class="sidebar-link reco-side-差异" data-v-b57cc07c>差异</a></li><li class="level-2" data-v-b57cc07c><a href="/frontend/javascript/react.html#react-hooks" class="sidebar-link reco-side-react-hooks" data-v-b57cc07c>React-Hooks</a></li><li class="level-3" data-v-b57cc07c><a href="/frontend/javascript/react.html#为什么选择-react-hooks" class="sidebar-link reco-side-为什么选择-react-hooks" data-v-b57cc07c>为什么选择 React-Hooks</a></li><li class="level-3" data-v-b57cc07c><a href="/frontend/javascript/react.html#局限性" class="sidebar-link reco-side-局限性" data-v-b57cc07c>局限性</a></li><li class="level-3" data-v-b57cc07c><a href="/frontend/javascript/react.html#使用原则" class="sidebar-link reco-side-使用原则" data-v-b57cc07c>使用原则</a></li><li class="level-3" data-v-b57cc07c><a href="/frontend/javascript/react.html#原理" class="sidebar-link reco-side-原理" data-v-b57cc07c>原理</a></li><li class="level-2" data-v-b57cc07c><a href="/frontend/javascript/react.html#react-15-的栈调和算法" class="sidebar-link reco-side-react-15-的栈调和算法" data-v-b57cc07c>React 15 的栈调和算法</a></li><li class="level-2" data-v-b57cc07c><a href="/frontend/javascript/react.html#_10-1-认识-flux" class="sidebar-link reco-side-_10-1-认识-flux" data-v-b57cc07c>10.1 认识 Flux</a></li><li class="level-2" data-v-b57cc07c><a href="/frontend/javascript/react.html#_12-1-shouldcomponentupdate" class="sidebar-link reco-side-_12-1-shouldcomponentupdate" data-v-b57cc07c>12.1 shouldComponentUpdate</a></li><li class="level-2" data-v-b57cc07c><a href="/frontend/javascript/react.html#_12-2-purecomponent-immutable-js" class="sidebar-link reco-side-_12-2-purecomponent-immutable-js" data-v-b57cc07c>12.2 PureComponent + Immutable.js</a></li><li class="level-2" data-v-b57cc07c><a href="/frontend/javascript/react.html#_12-3-react-memo" class="sidebar-link reco-side-_12-3-react-memo" data-v-b57cc07c>12.3 React.memo</a></li><li class="level-2" data-v-b57cc07c><a href="/frontend/javascript/react.html#_12-4-usememo" class="sidebar-link reco-side-_12-4-usememo" data-v-b57cc07c>12.4 useMemo</a></li><li class="level-2" data-v-b57cc07c><a href="/frontend/javascript/react.html#_13-1-高阶组件-hoc" class="sidebar-link reco-side-_13-1-高阶组件-hoc" data-v-b57cc07c>13.1 高阶组件(HOC)</a></li><li class="level-2" data-v-b57cc07c><a href="/frontend/javascript/react.html#_13-2-render-props" class="sidebar-link reco-side-_13-2-render-props" data-v-b57cc07c>13.2 Render Props</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;display:none;" data-v-5775ee02>
      欢迎来到 老冯博客
    </div> <div class="operation" style="right:90px;bottom:40px;display:;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:;" data-v-5775ee02></i></div> <canvas id="banniang" width="150" height="220" class="live2d" style="right:90px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div><div></div></div></div>
    <script src="/assets/js/app.7eae9dcf.js" defer></script><script src="/assets/js/3.47128248.js" defer></script><script src="/assets/js/1.19c0dc54.js" defer></script><script src="/assets/js/32.901a52e4.js" defer></script>
  </body>
</html>
